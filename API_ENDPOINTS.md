# API Endpoints салона красоты

## Аутентификация

Для доступа к защищенным endpoint'ам необходимо передавать заголовок `Auth-Token` с токеном аутентификации.

```
Auth-Token: your_backend_token_here
```

## Клиенты

### Получить всех клиентов
```
GET /api/customers/
```

Ответ:
```json
[
  {
    "id": 1,
    "phone": "+996123456789",
    "name": "Иван Иванов",
    "status": "active",
    "created_at": "2023-01-01T10:00:00"
  }
]
```

### Изменить статус клиента
```
PATCH /api/customers/{phone}/status/
```

Тело запроса:
```json
{
  "status": "blocked"
}
```

Ответ:
```json
{
  "id": 1,
  "phone": "+996123456789",
  "name": "Иван Иванов",
  "status": "blocked",
  "created_at": "2023-01-01T10:00:00"
}
```

## Мастера

### Получить всех мастеров
```
GET /api/masters/
```

Ответ:
```json
[
  {
    "id": 1,
    "phone": "+996123456789",
    "name": "Мастер Мастеров"
  }
]
```

### Добавить нового мастера
```
POST /api/masters/
```

Тело запроса:
```json
{
  "phone": "+996123456789",
  "name": "Мастер Мастеров"
}
```

Ответ:
```json
{
  "id": 1,
  "phone": "+996123456789",
  "name": "Мастер Мастеров"
}
```

## Услуги

### Получить все услуги
```
GET /api/services/
```

Ответ:
```json
[
  {
    "id": 1,
    "name": "Маникюр"
  }
]
```

### Добавить новую услугу
```
POST /api/services/
```

Тело запроса:
```json
{
  "name": "Маникюр"
}
```

Ответ:
```json
{
  "id": 1,
  "name": "Маникюр"
}
```

## Предложения (услуги мастеров)

### Получить все предложения
```
GET /api/offerings/
```

Параметры запроса (опционально):
- `master_id` - фильтрация по мастеру
- `service_id` - фильтрация по услуге

Ответ:
```json
[
  {
    "id": 1,
    "price": 1000,
    "duration": "01:30:00",
    "master": {
      "id": 1,
      "phone": "+996123456789",
      "name": "Мастер Мастеров"
    },
    "service": {
      "id": 1,
      "name": "Маникюр"
    }
  }
]
```

### Добавить новое предложение
```
POST /api/offerings/
```

Тело запроса:
```json
{
  "master_id": 1,
  "service_id": 1,
  "price": 1000,
  "duration": "01:30:00"
}
```

Ответ:
```json
{
  "id": 1,
  "price": 1000,
  "duration": "01:30:00",
  "master": {
    "id": 1,
    "phone": "+996123456789",
    "name": "Мастер Мастеров"
  },
  "service": {
    "id": 1,
    "name": "Маникюр"
  }
}
```

## Записи

### Получить все записи
```
GET /api/appointments/
```

Параметры запроса (опционально):
- `date` - фильтрация по дате
- `confirmed` - фильтрация по статусу подтверждения

Ответ:
```json
[
  {
    "id": 1,
    "name": "Иван Иванов",
    "phone": "+996123456789",
    "offering": {
      "id": 1,
      "price": 1000,
      "duration": "01:30:00",
      "master": {
        "id": 1,
        "phone": "+996123456789",
        "name": "Мастер Мастеров"
      },
      "service": {
        "id": 1,
        "name": "Маникюр"
      }
    },
    "slot": {
      "start": "2023-01-01T10:00:00",
      "end": "2023-01-01T11:30:00"
    },
    "confirmed": true,
    "created_at": "2023-01-01T09:00:00"
  }
]
```

### Создать новую запись
```
POST /api/appointments/
```

Тело запроса:
```json
{
  "name": "Иван Иванов",
  "phone": "+996123456789",
  "offering_id": 1,
  "datetime": "2023-01-01T10:00:00"
}
```

Ответ:
```json
{
  "id": 1,
  "name": "Иван Иванов",
  "phone": "+996123456789",
  "offering": {
    "id": 1,
    "price": 1000,
    "duration": "01:30:00",
    "master": {
      "id": 1,
      "phone": "+996123456789",
      "name": "Мастер Мастеров"
    },
    "service": {
      "id": 1,
      "name": "Маникюр"
    }
  },
  "slot": {
    "start": "2023-01-01T10:00:00",
    "end": "2023-01-01T11:30:00"
  },
  "confirmed": false,
  "created_at": "2023-01-01T09:00:00"
}
```

### Подтвердить запись администратором
```
POST /api/appointments/{id}/admin_confirm/
```

Ответ:
```json
{
  "message": "OK"
}
```

### Удалить запись
```
DELETE /api/appointments/{id}/
```

Ответ: 204 No Content